extend:
  - _base_logging.yaml
#: Конфигурация ВМ Агента
vm_agent:

  #: IP адрес брокер менеджера
  broker_manager_host: ""

  #: Порт на котором брокер менеджер слушает входящие подключения ВМ Агентов. По умолчанию 6601
  broker_manager_port: 6601

  #: Системная группа пользователей, которым доступно подключение через RX
  rx_allow_group: nx

  #: Интервал, с которым осуществляется проверка целостности VDI Агента. Задается в секундах
  self_check_interval: 14400

  #: Путь до исполняемого файла с RX сервером (Linux)
  nxserver_bin: nxserver

  #: Игнорирование ошибок добавления пользователя в локальную группу. ВНИМАНИЕ! Включение этой опции может нарушить функциональность рабочего стола.
  ignore_group_add_errors: false

  ############################################
  ## Параметры ниже менять не рекомендуется ##
  ############################################

  #: Внутр. Таймаут подключения к Брокер Менеджеру
  broker_manager_connection_timeout: 10

  #: Внутр. Интервал опроса Брокер Менеджера
  broker_manager_ping_interval: 180

  #: Внутр. Максимальное количество неудачных пинг-запросов к Брокер Менеджеру, после которых он считается недоступным
  broker_manager_max_failed_pings_count: 3

  #: Внутр. Порт, на котором будет работать VDI Агент
  port: 9966

  #: Внутр. Адрес, на котором будет работать VDI Агент
  bind_host: 0.0.0.0

  #: Порт RDP сервера
  rdp_server_port: 3389

  #: Время ожидания завершения процессов пользователя на Linux. Необходимо для корректного завершения сеанса пользователя
  linux_kill_proc_timeout: 5

  #: Время ожидания доступности RDP порта при перезагрузке терминального сервиса
  wait_rdp_port_timeout: 3

  #: Время ожидания доступности cокета при перезагрузке терминального сервиса
  rdp_check_socket_timeout: 5

  #: Время ожидания доступности RX порта при перезагрузке терминального сервиса
  wait_rx_port_timeout: 3

  #: Время ожидания доступности cокета при перезагрузке терминального сервиса
  rx_check_socket_timeout: 1

  #: Порт RX сервера
  rx_server_port: 22

  #: Принудительный перезапуск RX сервера при подключении пользователя в рабочий стол
  restart_rx_server: false

  #: Время ожидания проверки статуса systemd
  systemd_check_timeout: 1

  #: Принудительный перезапуск crond
  restart_crond: true

  #: Порт X2GO сервера
  x2go_server_port: 22

  #: Порт VNC сервера
  vnc_server_port: 5901

  #: Задержка при запуске службы для установки сетевых адресов
  start_delay: 0

  #: Не запускать функции обработчики команд ввода в домен (использовать в случае ручной настройки шаблона, полностью готового для работы в домене)
  skip_add_to_domain: false

  #: Не запускать функции обработчики команд ввода в домен (использовать в случае ручной настройки шаблона, полностью готового для работы в OpenLDAP домене)
  skip_add_to_openldap_domain: false

  #: принудительно менять hostname для Linux, даже если ввод в домен не осуществляется
  update_linux_hostname: true

  #: Путь до файла, в который будет записано значение таймаута неактивности, заданного для сессионного пула
  linux_inactive_timeout_file: /tmp/idle_timeout.txt

  #: Путь до папки для хранения обновлений. По умолчанию пустой, означает что будет использоваться "%LOCALAPPDATA%\vdi-agent\updates" для ОС Windows и /root/.vdi-agent/updates для ОС Linux
  updates_upload_dir:

  #: Время ожидания запуска vnc сервера для удаленных подключений администратора
  vnc_start_wait_time: 1

  #: Время ожидания завершения процесса vnc сервера после отправки ему сигнала SIGTERM.
  vnc_terminate_wait_time: 0.2

  #: Путь до утилиты zenity для показа уведомлений в рабочих столах на Linux
  zenity_path: "/usr/bin/zenity"

  #: Период запуска задачи проверки активных подключений к Брокер Менеджеру и отключения от него, если подключение больше не требуется
  close_manager_connection: 10

  periodic:
    default_fail_delay_ratio: 0.5
    ping:
      timeout: 5
      scatter_ratio: 0.3
      fail_delay_ratio: 0.6

  #: Настройки отслеживания RX приложений
  rx_terminal_applications_tracker:
    #: Интервал проверки запущенного приложения
    track_interval: 1
    #: Интервал проверки запуска приложения
    search_interval: 3
    #: Время ожидания запуска приложения
    search_timeout: 60
    #: Путь до скрипта Xsession сервера приложения RX
    rx_xsession_path: "/etc/rx-etersoft/Xsession"

devel:
  debug: false
  local: false
